<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>HashBlot hash visualization</title>
    <script src="sha1.js"></script>
  </head>
  <body>
    <svg id="blotout" viewBox = '-1 -1 257 257'>
      <path id='blotpath'></path>
    </svg>
    <input id="entryfield" type="text">
    <script>
      /*global jsSHA*/
      
      //Fun, kinda angle-y. Tends to make a lot of birds.
      function fiveQuadraticsPath (content){
        var hash = new jsSHA(content,'TEXT').getHash('SHA-1','HEX');
        
        var pathNodes = [];
        pathNodes[0] = 'M '+parseInt(hash.slice(36,38),16)
          +','+parseInt(hash.slice(38,40),16);
        for(var i = 1; i<5; i++) {
          var base = (i-1)*8;
          pathNodes[i]='Q '+parseInt(hash.slice(base,base+2),16)
            +','+parseInt(hash.slice(base+2,base+4),16)
            +' '+parseInt(hash.slice(base+4,base+6),16)
            +','+parseInt(hash.slice(base+6,base+8),16);
        }
        return pathNodes.join(' ');
      }
      
      //Sucks.
      function tenQuadraticsPath (content){
        var hash = new jsSHA(content,'TEXT').getHash('SHA-1','HEX');
        
        var pathNodes = [];
        pathNodes[0] = 'M '+parseInt(hash.slice(36,38),16)
          +','+parseInt(hash.slice(38,40),16)
          +' Q '+parseInt(hash.slice(0,2),16)
          +','+parseInt(hash.slice(2,4),16)
          +' '+parseInt(hash.slice(4,6),16)
          +','+parseInt(hash.slice(6,8),16);
        for(var i = 2; i<10; i++) {
          var base = 8+(i-2)*4;
          pathNodes[i-1]='T '+parseInt(hash.slice(base,base+2),16)
            +','+parseInt(hash.slice(base+2,base+4),16);
        }
        return pathNodes.join(' ');
      }
      
      document.getElementById('entryfield').addEventListener('keyup',function(evt){
        document.getElementById('blotpath')
          .setAttribute('d',fiveQuadraticsPath(evt.target.value));
      });
    </script>
  </body>
</html>